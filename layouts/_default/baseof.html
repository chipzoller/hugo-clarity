{{- $s := .Site.Params }}
{{- $p := .Params }}
<!DOCTYPE html>
<html lang="{{ .Lang }}" data-figures="{{ $p.figurePositionShow }}"{{ if .IsPage }} class="page"{{ end }}{{ if .IsHome }} class="home"{{ end }}{{ with $s.enforceLightMode }} data-mode="lit"{{ end }}{{ with $s.enforceDarkMode }} data-mode="dim"{{ end }}>
  <head>
    {{- partial "head" . }}
    {{ partial "hooks/head-end.html" . }}
  </head>
  {{- $maxCodeLines := 100 }}
  {{- with $s.codeMaxLines }}
    {{- $maxCodeLines = . }}
  {{- end }}
  {{- with $p.codeMaxLines }}
    {{- $maxCodeLines = . }}
  {{- end }}
  {{- $codeLineNumbers := false }}
  {{ with $s.codeLineNumbers }}
    {{- $codeLineNumbers = . }}
  {{ end }}
  {{ with $p.codeLineNumbers }}
    {{- $codeLineNumbers = . }}
    {{ else }}
    {{ if eq $p.codeLineNumbers false }}
      {{- $codeLineNumbers = false }}
    {{ end }}
  {{ end }}
  <body data-code="{{ $maxCodeLines }}" data-lines="{{ $codeLineNumbers }}" id="documentTop">
    {{- partial "header" . }}
    <main>
      {{- block "main" . }}{{ end }}
    </main>
    {{- partialCached "icons" . }}
    {{- partialCached "footer" . }}
    {{ $bundle := partialCached "func/getJavascriptBundle" . }}
    <script type="text/javascript" src="{{ $bundle.Permalink }}" integrity="{{ $bundle.Data.Integrity }}" crossorigin="anonymous"></script>
    {{- partial "search/scripts" . }}
    {{- with $s.customJS }}
    {{- range . -}}
    <script type="text/javascript" src="{{ relURL . }}" ></script>
    {{- end }}
    {{- end }}
    {{ partialCached "hooks/body-end.html" . }}
  </body>
</html>
